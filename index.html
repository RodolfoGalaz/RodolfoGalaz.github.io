<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Mando Alqu√≠mico</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/dexie@3/dist/dexie.js"></script>
    <script src="js/script.js" defer></script>
    <!-- En index.html, dentro del <head> -->
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div class="app-container">
        <header>
            <h1>Centro de Mando Alqu√≠mico</h1>
            <p class="subtitle">"La humanidad no puede obtener nada sin dar primero algo a cambio."</p>
            <div class="settings-trigger" id="settings-trigger">‚öôÔ∏è</div>
        </header>

        <nav>
            <a href="#" class="nav-link active" data-target="dashboard">üö™ El Portal</a>
            <a href="#" class="nav-link" data-target="malla">üìú Malla Alqu√≠mica</a>
            <a href="#" class="nav-link" data-target="horario">üî¨ Laboratorio Semanal</a>
            <a href="#" class="nav-link" data-target="calendario">üìÖ Or√°culo del Tiempo</a>
            <a href="#" class="nav-link" data-target="biblioteca">üìö Archivo Secreto</a>
            <a href="#" class="nav-link" data-target="recordatorios">üìù Decretos del Estado</a>
        </nav>

        <main>
            <section id="dashboard" class="content-section active">
                <h2>Resumen del D√≠a</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-widget">
                        <h3>Eventos de Hoy</h3>
                        <ul id="today-events-list" class="widget-list"></ul>
                    </div>
                    <div class="dashboard-widget">
                        <h3>Decretos Urgentes</h3>
                        <ul id="urgent-tasks-list" class="widget-list"></ul>
                    </div>
                    <div class="dashboard-widget pomodoro-widget">
                        <h3>C√≠rculo de Concentraci√≥n</h3>
                        <div id="pomodoro-timer" class="timer-display">25:00</div>
                        <div id="pomodoro-mode" class="timer-mode">¬°A Trabajar!</div>
                        <div class="pomodoro-controls">
                            <button id="pomodoro-start" class="btn-primary">Iniciar</button>
                            <button id="pomodoro-pause" class="btn-secondary">Pausar</button>
                            <button id="pomodoro-reset" class="btn-secondary">Resetear</button>
                        </div>
                    </div>
                    <div class="dashboard-widget edward-widget">
                        <img src="images/edward-dance.gif" alt="Edward Elric bailando">
                    </div>
                </div>
            </section>

            <section id="malla" class="content-section">
                <h2>Tu Camino del Alquimista: Ing. Civil El√©ctrica</h2>
                <div class="gpa-display">Promedio Ponderado Acumulado (PPA): <span id="gpa-value">N/A</span></div>
                <div class="malla-grid-container">
                    <div class="malla-label r1">10¬∞ Sem.</div><div class="malla-label r2">9¬∞ Sem.</div><div class="malla-label r3">8¬∞ Sem.</div><div class="malla-label r4">7¬∞ Sem.</div><div class="malla-label r5">6¬∞ Sem.</div><div class="malla-label r6">5¬∞ Sem.</div><div class="malla-label r7">4¬∞ Sem.</div><div class="malla-label r8">3¬∞ Sem.</div><div class="malla-label r9">2¬∞ Sem.</div><div class="malla-label r10">1¬∞ Sem.</div>
                    <div class="curso c2 r10" data-sct="6"><span>Prec√°lculo</span><small>6 SCT</small></div><div class="curso c3 r10" data-sct="6"><span>Intr. a Mat. Discretas</span><small>6 SCT</small></div><div class="curso c4 r10" data-sct="3"><span>Herram. Computacionales</span><small>3 SCT</small></div><div class="curso c5 r10" data-sct="6"><span>Ciencias Aplicadas a la Ing.</span><small>6 SCT</small></div><div class="curso c6 r10" data-sct="3"><span>Comunicaci√≥n Oral y Escrita</span><small>3 SCT</small></div><div class="curso c7 r10" data-sct="6"><span>Introducci√≥n a la Ing.</span><small>6 SCT</small></div>
                    <div class="curso c2 r9" data-sct="6"><span>C√°lculo Diferencial e Integral</span><small>6 SCT</small></div><div class="curso c3 r9" data-sct="6"><span>√Ålgebra Lineal</span><small>6 SCT</small></div><div class="curso c4 r9" data-sct="5"><span>Programaci√≥n</span><small>5 SCT</small></div><div class="curso c5 r9" data-sct="4"><span>Qu√≠mica</span><small>4 SCT</small></div><div class="curso c6 r9" data-sct="6"><span>F√≠sica I</span><small>6 SCT</small></div><div class="curso c7 r9" data-sct="3"><span>Ingl√©s 1 / F.G.</span><small>3 SCT</small></div>
                    <div class="curso c2 r8" data-sct="6"><span>C√°lculo Avanzado</span><small>6 SCT</small></div><div class="curso c3 r8" data-sct="6"><span>Ecuaciones Diferenciales</span><small>6 SCT</small></div><div class="curso c4 r8" data-sct="4"><span>Dise√±o Digital y Aplic.</span><small>4 SCT</small></div><div class="curso c5 r8" data-sct="5"><span>An√°lisis de Circuitos</span><small>5 SCT</small></div><div class="curso c6 r8" data-sct="6"><span>F√≠sica II</span><small>6 SCT</small></div><div class="curso c7 r8" data-sct="3"><span>Ingl√©s 2 / F.G.</span><small>3 SCT</small></div>
                    <div class="curso c2 r7" data-sct="6"><span>Probabilidad y Estad√≠stica</span><small>6 SCT</small></div><div class="curso c3 r7" data-sct="6"><span>M√©todos Num√©ricos</span><small>6 SCT</small></div><div class="curso c4 r7" data-sct="6"><span>Electromagnetismo Aplic.</span><small>6 SCT</small></div><div class="curso c5 r7" data-sct="6"><span>Se√±ales y Sistemas I</span><small>6 SCT</small></div><div class="curso c6 r7" data-sct="3"><span>√âtica y R.S. en Ing.</span><small>3 SCT</small></div><div class="curso c7 r7" data-sct="3"><span>Ingl√©s 3 / F.G. / Proyecto</span><small>3 SCT</small></div>
                    <div class="curso c2 r6" data-sct="6"><span>Electivo Computaci√≥n Avanzada</span><small>6 SCT</small></div><div class="curso c3 r6" data-sct="6"><span>Lab. de Ing. El√©ct. y Aplic.</span><small>6 SCT</small></div><div class="curso c4 r6" data-sct="6"><span>Conversi√≥n Electromec.</span><small>6 SCT</small></div><div class="curso c5 r6" data-sct="6"><span>Se√±ales y Sistemas II</span><small>6 SCT</small></div><div class="curso c6 r6" data-sct="3"><span>Trabajo Dirigido en Ing. El√©ctrica</span><small>3 SCT</small></div><div class="curso c7 r6" data-sct="3"><span>Ingl√©s 4</span><small>3 SCT</small></div>
                    <div class="curso c2 r5" data-sct="6"><span>Econom√≠a y Gesti√≥n</span><small>6 SCT</small></div><div class="curso c3 r5" data-sct="6"><span>Optimizaci√≥n</span><small>6 SCT</small></div><div class="curso c4 r5" data-sct="6"><span>Sistemas El√©ctricos de Energ√≠a</span><small>6 SCT</small></div><div class="curso c5 r5" data-sct="6"><span>Sistemas de Control</span><small>6 SCT</small></div><div class="curso c6 r5" data-sct="3"><span>Legislaci√≥n y Medioamb.</span><small>3 SCT</small></div><div class="curso c7 r5" data-sct="3"><span>Ingl√©s 5</span><small>3 SCT</small></div>
                    <div class="curso c2 r4" data-sct="6"><span>Formulaci√≥n y Eval. de Proyectos</span><small>6 SCT</small></div><div class="curso c3 r4" data-sct="6"><span>Taller de Dise√±o</span><small>6 SCT</small></div><div class="curso c4 r4" data-sct="6"><span>Electr√≥nica</span><small>6 SCT</small></div><div class="curso c5 r4" data-sct="6"><span>Rob√≥tica</span><small>6 SCT</small></div><div class="curso c6 r4" data-sct="6"><span>Sistemas de Comunicaci√≥n</span><small>6 SCT</small></div><div class="curso c8 r4 c-span-2" data-sct="12"><span>Pr√°ctica Profesional</span><small>12 SCT</small></div>
                    <div class="curso c2 r3" data-sct="6"><span>Taller de Emprendimiento</span><small>6 SCT</small></div><div class="curso c3 r3" data-sct="6"><span>Taller de Innov. en Ing. El√©ctrica</span><small>6 SCT</small></div><div class="curso c4 r3" data-sct="6"><span>Lab. Electivo de Ing. El√©ct.</span><small>6 SCT</small></div><div class="curso c5 r3" data-sct="6"><span>Electivo I</span><small>6 SCT</small></div><div class="curso c6 r3" data-sct="6"><span>Electivo / Minor</span><small>6 SCT</small></div>
                    <div class="curso c2 r2 c-span-2" data-sct="12"><span>Taller de Proyectos</span><small>12 SCT</small></div><div class="curso c4 r2" data-sct="6"><span>Electivo II</span><small>6 SCT</small></div><div class="curso c5 r2" data-sct="6"><span>Electivo / Minor</span><small>6 SCT</small></div><div class="curso c6 r2" data-sct="6"><span>Electivo / Minor</span><small>6 SCT</small></div>
                    <div class="curso c2 r1 c-span-4" data-sct="30"><span>Trabajo de T√≠tulo</span><small>30 SCT</small></div>
                </div>
            </section>
            
            <section id="horario" class="content-section">
                <h2>Plan de Acci√≥n Semanal</h2>
                <div class="schedule-controls">
                    <h3>Clases Fijas</h3>
                    <button id="add-class-btn" class="btn-primary">A√±adir Nueva Asignatura</button>
                    <ul id="fixed-class-list" class="item-list"></ul>
                </div>
                <div class="schedule-table-container">
                    <table id="weekly-schedule-table">
                        <thead><tr><th>Hora</th><th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th><th>S√°bado</th></tr></thead>
                        <tbody id="schedule-body"></tbody>
                    </table>
                </div>
            </section>

            <section id="calendario" class="content-section">
                <h2>Previsiones y Ciclos Lunares</h2>
                <p class="instruction">Haz clic en un d√≠a para a√±adir un evento (prueba, entrega, etc.)</p>
                <div class="calendar-container">
                    <div class="calendar-header"><button id="prev-month">‚óÑ</button><h3 id="month-year"></h3><button id="next-month">‚ñ∫</button></div>
                    <div class="calendar-grid days-of-week"><div>Dom</div><div>Lun</div><div>Mar</div><div>Mi√©</div><div>Jue</div><div>Vie</div><div>S√°b</div></div>
                    <div class="calendar-grid" id="calendar-days"></div>
                </div>
            </section>
            
            <section id="biblioteca" class="content-section">
                <h2>Textos Prohibidos y Recursos</h2>
                <div class="library-controls">
                    <form id="add-folder-form"><input type="text" id="folder-name-input" placeholder="Nombre de la nueva carpeta" required><button type="submit">Crear Carpeta</button></form>
                    <form id="add-file-form" class="file-form"><label for="file-input" class="file-label">Seleccionar Pergamino...</label><input type="file" id="file-input" required><input type="text" id="file-custom-name" placeholder="Nombre del pergamino" required><select id="file-folder-select"></select><button type="submit">Sellar y Archivar</button></form>
                </div>
                <div id="file-library"></div>
            </section>

            <section id="recordatorios" class="content-section">
                <h2>Misiones de Alquimista Estatal</h2>
                <form id="add-task-form"><input type="text" id="task-input" placeholder="Nueva directiva..." required><select id="task-priority-input"><option value="alta">Prioridad Alta</option><option value="normal" selected>Normal</option><option value="baja">Baja</option></select><button type="submit">Decretar Misi√≥n</button></form>
                <ul id="task-list" class="item-list"></ul>
            </section>
        </main>
    </div>
    
    <!-- MODALES -->
    <div id="event-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>A√±adir Evento Alqu√≠mico</h3>
            <form id="event-form"><input type="hidden" id="event-date"><label for="event-title-input">T√≠tulo del Evento:</label><input type="text" id="event-title-input" required placeholder="Ej: Prueba de C√°lculo II"><label for="event-time-input">Hora de Inicio:</label><input type="time" id="event-time-input" required><label for="event-end-time-input">Hora de Fin:</label><input type="time" id="event-end-time-input" required><label for="event-type-input">Tipo de Evento:</label><select id="event-type-input"><option value="prueba">Prueba / Examen</option><option value="entrega">Entrega / Tarea</option><option value="estudio">Sesi√≥n de Estudio</option><option value="otro">Otro</option></select><div class="modal-buttons"><button type="submit" class="btn-primary">Sellar Evento</button><button type="button" id="cancel-event-btn" class="btn-secondary">Cancelar</button></div></form>
        </div>
    </div>

    <div id="grade-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Sellar Calificaci√≥n</h3>
            <form id="grade-form"><p>Ingresa la nota final para: <strong id="grade-course-name"></strong></p><input type="hidden" id="grade-course-index"><label for="grade-input">Nota (1.0 - 7.0):</label><input type="number" id="grade-input" step="0.1" min="1.0" max="7.0" required><div class="modal-buttons"><button type="submit" class="btn-primary">Registrar Nota</button><button type="button" id="cancel-grade-btn" class="btn-secondary">Cancelar</button></div></form>
        </div>
    </div>
    
    <div id="class-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>A√±adir Asignatura Fija</h3>
            <form id="add-class-form">
                <label for="class-title-input">Nombre Asignatura:</label>
                <input type="text" id="class-title-input" placeholder="Ej: C√°lculo Avanzado" required>
                <label for="class-color-input">Color de Asignatura:</label>
                <input type="color" id="class-color-input" value="#e63946">
                <hr>
                <h4>Bloques de Clases</h4>
                <div id="class-blocks-container"></div>
                <button type="button" id="add-class-block-btn" class="btn-secondary">A√±adir Bloque (C√°tedra/Ayudant√≠a)</button>
                <hr>
                <div class="modal-buttons">
                    <button type="submit" class="btn-primary">Guardar Asignatura</button>
                    <button type="button" id="cancel-class-btn" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="settings-panel" class="settings-panel">
        <h3>Laboratorio Est√©tico</h3><p>Elige el acento de tu c√≠rculo:</p>
        <div class="theme-options"><button class="theme-btn" data-theme="rojo" style="background-color: #e63946;"></button><button class="theme-btn" data-theme="azul" style="background-color: #457b9d;"></button><button class="theme-btn" data-theme="verde" style="background-color: #2a9d8f;"></button><button class="theme-btn" data-theme="purpura" style="background-color: #9b59b6;"></button></div>
        <button id="close-settings-btn" class="btn-secondary">Cerrar</button>
    </div>
    
    <audio id="pomodoro-sound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>
</body>
</html>
